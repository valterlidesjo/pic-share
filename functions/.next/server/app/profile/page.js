(()=>{var e={};e.id=636,e.ids=[636],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30389:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,16444,23)),Promise.resolve().then(t.t.bind(t,16042,23)),Promise.resolve().then(t.t.bind(t,88170,23)),Promise.resolve().then(t.t.bind(t,49477,23)),Promise.resolve().then(t.t.bind(t,29345,23)),Promise.resolve().then(t.t.bind(t,12089,23)),Promise.resolve().then(t.t.bind(t,46577,23)),Promise.resolve().then(t.t.bind(t,31307,23))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},39078:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var i=t(43210);t(75535),t(84758);var s=t(93978);function a(){let[e,r]=(0,i.useState)(null),{user:t}=(0,s.A)();return{userInfo:e}}},43957:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,86346,23)),Promise.resolve().then(t.t.bind(t,27924,23)),Promise.resolve().then(t.t.bind(t,35656,23)),Promise.resolve().then(t.t.bind(t,40099,23)),Promise.resolve().then(t.t.bind(t,38243,23)),Promise.resolve().then(t.t.bind(t,28827,23)),Promise.resolve().then(t.t.bind(t,62763,23)),Promise.resolve().then(t.t.bind(t,97173,23))},45579:(e,r,t)=>{"use strict";t.d(r,{K:()=>o});var i=t(43210),s=t(75535),a=t(84758);let o=e=>{let[r,t]=(0,i.useState)([]),[o,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!e)return void t([]);let r=(0,s.P)((0,s.rJ)(a.db,"images"),(0,s._M)("userId","==",e)),i=(0,s.aQ)(r,e=>{t(e.docs.map(e=>{let r=e.data(),t=r.uploadedAt?.toDate?r.uploadedAt.toDate():new Date;return{id:e.id,userId:r.userId,imageUrl:r.imageUrl,fileName:r.fileName,uploadedAt:t,email:r.email}}))},e=>{console.error("Error collecting images:",e),l("Could not load images")});return()=>i()},[e]),{images:r,error:o}}},49491:(e,r,t)=>{Promise.resolve().then(t.bind(t,86246))},55511:e=>{"use strict";e.exports=require("crypto")},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var i=t(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71937:(e,r,t)=>{"use strict";t.d(r,{S:()=>i});let i=e=>{if(!e)return"";let r=e.lastIndexOf("."),t=e;return(r>0&&(t=e.substring(0,r)),0===t.length)?"":t.charAt(0).toUpperCase()+t.slice(1)}},73051:(e,r,t)=>{Promise.resolve().then(t.bind(t,88928))},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},75758:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});let i=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\programming\\\\pic-share\\\\src\\\\app\\\\profile\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\programming\\pic-share\\src\\app\\profile\\page.tsx","default")},78461:(e,r,t)=>{Promise.resolve().then(t.bind(t,75758))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84758:(e,r,t)=>{"use strict";t.d(r,{I:()=>n,db:()=>d,j:()=>c});var i=t(78403),s=t(67989),a=t(75535),o=t(70146);let l=(0,s.Wp)({apiKey:"AIzaSyDLn-Qoqt0XSx9Fr7jdTqXt54rtzboGcUw",authDomain:"pic-share-be97b.firebaseapp.com",projectId:"pic-share-be97b",storageBucket:"pic-share-be97b.firebasestorage.app",messagingSenderId:"717613380259",appId:"1:717613380259:web:bc5443d92ec0ee76b20516",measurementId:"G-L1DP17QLDW"}),n=(0,o.c7)(l),d=(0,a.aU)(l),c=(0,i.xI)(l)},86246:(e,r,t)=>{"use strict";t.d(r,{default:()=>j});var i=t(60687),s=t(43210),a=t(24955),o=t(66932),l=t(83685),n=t(73855),d=t(64622),c=t(45525),p=t(75506),u=t(15280),m=t(16184),x=t(16189),h=t(93978),f=t(78403),g=t(84758),v=t(88931),b=t(78667),y=t(30474);let j=()=>{let{user:e}=(0,h.A)(),r=(0,x.useRouter)(),[t,j]=(0,s.useState)(!1),A=(0,b.A)("(min-width:640px)"),w=e?.isAnonymous,C=e=>{j(!1),r.push(e)},k=async()=>{await (0,f.CI)(g.j),j(!1),r.push("/")},P=w?[{label:"Home",path:"/"},{label:"Gallery",path:"/gallery"},{label:"Upload",path:"/upload"},{label:"Sign In",path:"/sign-in"},{label:"Sign Up",path:"/sign-up"}]:[{label:"Home",path:"/"},{label:"Gallery",path:"/gallery"},{label:"Feed",path:"/feed"},{label:"Users",path:"/users"},{label:"Upload",path:"/upload"},{label:"Profile",path:"/profile"},{label:"Log Out",action:k}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{position:"static",sx:{background:"white"},children:(0,i.jsxs)(o.A,{children:[!A&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(v.A,{sx:{display:"flex",flex:1,justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(l.A,{edge:"start",color:"inherit","aria-label":"menu",onClick:()=>j(!0),sx:{mr:2,color:"#1976D2"},children:(0,i.jsx)(n.A,{})}),(0,i.jsx)("div",{className:"relative h-[60px] w-[60px]",children:(0,i.jsx)(y.default,{src:"/picshare.png",alt:"PicShare logo 1",fill:!0,className:"object-contain",priority:!0})})]})}),A&&(0,i.jsxs)(v.A,{sx:{display:"flex",flex:1,justifyContent:"space-around",alignItems:"center"},children:[(0,i.jsx)("div",{className:"relative h-[60px] w-[60px]",children:(0,i.jsx)(y.default,{src:"/picshare.png",alt:"PicShare logo 1",fill:!0,className:"object-contain",priority:!0})}),P.map((e,r)=>e.action?(0,i.jsx)(m.A,{color:"inherit",onClick:e.action,sx:{textTransform:"none",color:"#1976D2"},children:e.label},r):(0,i.jsx)(m.A,{color:"inherit",onClick:()=>C(e.path),sx:{textTransform:"none",color:"#1976D2"},children:e.label},r))]})]})}),(0,i.jsx)(d.Ay,{anchor:"left",open:t,onClose:()=>j(!1),children:(0,i.jsx)(c.A,{sx:{width:220},children:P.map((e,r)=>e.action?(0,i.jsx)(p.Ay,{component:"button",onClick:e.action,children:(0,i.jsx)(u.A,{primary:e.label})},r):(0,i.jsx)(p.Ay,{component:"button",onClick:()=>C(e.path),children:(0,i.jsx)(u.A,{primary:e.label})},r))})})]})}},88928:(e,r,t)=>{"use strict";t.d(r,{default:()=>i});let i=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\programming\\\\pic-share\\\\src\\\\components\\\\Navigation.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\programming\\pic-share\\src\\components\\Navigation.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},93978:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var i=t(43210),s=t(17193),a=t(16189),o=t(84758);let l=()=>{let[e,r]=(0,s.hD)(o.j),t=(0,a.useRouter)();return(0,i.useEffect)(()=>{let i=e?.isAnonymous;r||e||!i||t.push("/sign-in")},[e,r,t]),{user:e,loading:r}}},94431:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,metadata:()=>d});var i=t(37413),s=t(22376),a=t.n(s),o=t(68726),l=t.n(o);t(61135);var n=t(88928);let d={title:"Create Next App",description:"Generated by create next app"};function c({children:e}){return(0,i.jsx)("html",{lang:"en",children:(0,i.jsxs)("body",{className:`${a().variable} ${l().variable} antialiased`,children:[(0,i.jsx)(n.default,{}),e]})})}},94643:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>eC});var i=t(60687),s=t(93978),a=t(43210),o=t.n(a),l=t(16184),n=t(78403),d=t(84758),c=t(39078),p=t(70604),u=t(49384),m=t(99282),x=t(78160),h=t(61543),f=t(22164),g=t(5294),v=t(51067),b=t(4144),y=t(82816);function j(e){return(0,y.Ay)("MuiDialog",e)}let A=(0,b.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),w=a.createContext({});var C=t(26233),k=t(99482),P=t(21360),S=t(45258),N=t(49580),D=t(34414);let M=(0,k.Ay)(C.A,{name:"MuiDialog",slot:"Backdrop",overrides:(e,r)=>r.backdrop})({zIndex:-1}),E=e=>{let{classes:r,scroll:t,maxWidth:i,fullWidth:s,fullScreen:a}=e,o={root:["root"],container:["container",`scroll${(0,h.A)(t)}`],paper:["paper",`paperScroll${(0,h.A)(t)}`,`paperWidth${(0,h.A)(String(i))}`,s&&"paperFullWidth",a&&"paperFullScreen"]};return(0,m.A)(o,j,r)},I=(0,k.Ay)(f.A,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),W=(0,k.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.container,r[`scroll${(0,h.A)(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),R=(0,k.Ay)(v.A,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.paper,r[`scrollPaper${(0,h.A)(t.scroll)}`],r[`paperWidth${(0,h.A)(String(t.maxWidth))}`],t.fullWidth&&r.paperFullWidth,t.fullScreen&&r.paperFullScreen]}})((0,S.A)(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${A.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(e=>"xs"!==e).map(r=>({props:{maxWidth:r},style:{maxWidth:`${e.breakpoints.values[r]}${e.breakpoints.unit}`,[`&.${A.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[r]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${A.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),q=a.forwardRef(function(e,r){let t=(0,N.b)({props:e,name:"MuiDialog"}),s=(0,P.A)(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":n,"aria-modal":d=!0,BackdropComponent:c,BackdropProps:p,children:m,className:h,disableEscapeKeyDown:f=!1,fullScreen:b=!1,fullWidth:y=!1,maxWidth:j="sm",onClick:A,onClose:C,open:k,PaperComponent:S=v.A,PaperProps:q={},scroll:F="paper",slots:$={},slotProps:T={},TransitionComponent:z=g.A,transitionDuration:U=o,TransitionProps:L,..._}=t,H={...t,disableEscapeKeyDown:f,fullScreen:b,fullWidth:y,maxWidth:j,scroll:F},G=E(H),B=a.useRef(),V=(0,x.A)(n),X=a.useMemo(()=>({titleId:V}),[V]),K={slots:{transition:z,...$},slotProps:{transition:L,paper:q,backdrop:p,...T}},[O,Y]=(0,D.A)("root",{elementType:I,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:H,className:(0,u.A)(G.root,h),ref:r}),[Q,Z]=(0,D.A)("backdrop",{elementType:M,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:H}),[J,ee]=(0,D.A)("paper",{elementType:R,shouldForwardComponentProp:!0,externalForwardedProps:K,ownerState:H,className:(0,u.A)(G.paper,q.className)}),[er,et]=(0,D.A)("container",{elementType:W,externalForwardedProps:K,ownerState:H,className:G.container}),[ei,es]=(0,D.A)("transition",{elementType:g.A,externalForwardedProps:K,ownerState:H,additionalProps:{appear:!0,in:k,timeout:U,role:"presentation"}});return(0,i.jsx)(O,{closeAfterTransition:!0,slots:{backdrop:Q},slotProps:{backdrop:{transitionDuration:U,as:c,...Z}},disableEscapeKeyDown:f,onClose:C,open:k,onClick:e=>{A&&A(e),B.current&&(B.current=null,C&&C(e,"backdropClick"))},...Y,..._,children:(0,i.jsx)(ei,{...es,children:(0,i.jsx)(er,{onMouseDown:e=>{B.current=e.target===e.currentTarget},...et,children:(0,i.jsx)(J,{as:S,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":V,"aria-modal":d,...ee,children:(0,i.jsx)(w.Provider,{value:X,children:m})})})})})});var F=t(87088);function $(e){return(0,y.Ay)("MuiDialogTitle",e)}let T=(0,b.A)("MuiDialogTitle",["root"]),z=e=>{let{classes:r}=e;return(0,m.A)({root:["root"]},$,r)},U=(0,k.Ay)(F.A,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),L=a.forwardRef(function(e,r){let t=(0,N.b)({props:e,name:"MuiDialogTitle"}),{className:s,id:o,...l}=t,n=z(t),{titleId:d=o}=a.useContext(w);return(0,i.jsx)(U,{component:"h2",className:(0,u.A)(n.root,s),ownerState:t,ref:r,variant:"h6",id:o??d,...l})});function _(e){return(0,y.Ay)("MuiDialogContent",e)}(0,b.A)("MuiDialogContent",["root","dividers"]);let H=e=>{let{classes:r,dividers:t}=e;return(0,m.A)({root:["root",t&&"dividers"]},_,r)},G=(0,k.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,t.dividers&&r.dividers]}})((0,S.A)(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${T.root} + &`]:{paddingTop:0}}}]}))),B=a.forwardRef(function(e,r){let t=(0,N.b)({props:e,name:"MuiDialogContent"}),{className:s,dividers:a=!1,...o}=t,l={...t,dividers:a},n=H(l);return(0,i.jsx)(G,{className:(0,u.A)(n.root,s),ownerState:l,ref:r,...o})});var V=t(5591);function X(e){return(0,y.Ay)("MuiDialogContentText",e)}(0,b.A)("MuiDialogContentText",["root"]);let K=e=>{let{classes:r}=e,t=(0,m.A)({root:["root"]},X,r);return{...r,...t}},O=(0,k.Ay)(F.A,{shouldForwardProp:e=>(0,V.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root"})({}),Y=a.forwardRef(function(e,r){let t=(0,N.b)({props:e,name:"MuiDialogContentText"}),{children:s,className:a,...o}=t,l=K(o);return(0,i.jsx)(O,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:o,className:(0,u.A)(l.root,a),...t,classes:l})});var Q=t(11845);function Z(e){return(0,y.Ay)("MuiDialogActions",e)}(0,b.A)("MuiDialogActions",["root","spacing"]);let J=e=>{let{classes:r,disableSpacing:t}=e;return(0,m.A)({root:["root",!t&&"spacing"]},Z,r)},ee=(0,k.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),er=a.forwardRef(function(e,r){let t=(0,N.b)({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:a=!1,...o}=t,l={...t,disableSpacing:a},n=J(l);return(0,i.jsx)(ee,{className:(0,u.A)(n.root,s),ownerState:l,ref:r,...o})});var et=t(75535);let ei=o().forwardRef(function(e,r){return(0,i.jsx)(p.A,{direction:"up",ref:r,...e})}),es=({user:e,userInfo:r})=>{let[t,s]=(0,a.useState)(!1),[o,n]=(0,a.useState)(""),[c,p]=(0,a.useState)(null),u=async()=>{if(e?.uid)try{await (0,et.mZ)((0,et.H9)(d.db,"users",e.uid),{username:o}),p(`Username added successfully: ${o}`)}catch(e){console.error("Error adding username: ",e),p("Error adding username")}};return r?.username?(0,i.jsxs)("p",{children:["Email: ",r.email]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-2xl pb-2 pt-8",children:"Do you want to add a username to your account?"}),(0,i.jsx)(l.A,{variant:"outlined",onClick:()=>s(!0),sx:{width:"100%",color:"#E38724"},children:"Add username"}),(0,i.jsxs)(q,{open:t,slots:{transition:ei},keepMounted:!0,onClose:()=>s(!1),"aria-describedby":"alert-dialog-slide-description",children:[(0,i.jsx)(L,{children:"Add a username to your profile"}),(0,i.jsxs)(B,{children:[(0,i.jsxs)(Y,{id:"alert-dialog-slide-description",children:["Adding a username to your profile will allow you to be recognized by other users. You can also change your username later if you want."," ",(0,i.jsx)("br",{}),"Without a username your email will be displayed instead."]}),(0,i.jsx)(Q.A,{label:"Username",value:o,onChange:e=>n(e.target.value),className:"mt-2"})]}),(0,i.jsxs)(er,{children:[(0,i.jsx)(l.A,{variant:"outlined",onClick:()=>s(!1),children:"Don't add"}),(0,i.jsx)(l.A,{variant:"outlined",onClick:()=>{s(!1),u()},children:"Add username"})]})]}),c&&(0,i.jsx)("p",{children:c})]})};var ea=t(23428);let eo=(0,ea.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),el=(0,ea.A)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),en=(0,ea.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),ed=(0,ea.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),ec=(0,ea.A)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var ep=t(71937);let eu=async(e,r)=>{try{let t=(0,et.H9)(d.db,"images",e);await (0,et.mZ)(t,{fileName:r}),console.log(`Image ${e} updated with new file name: ${r}`)}catch(e){console.error("Error updating filename:",e)}},em=async e=>{try{let r=(0,et.H9)(d.db,"images",e);await (0,et.kd)(r),console.log(`Image ${e} deleted successfully`)}catch(e){console.error("Error deleting image:",e)}};var ex=t(30474);let eh=({image:e})=>{let[r,t]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!1),[n,d]=(0,a.useState)("");return(0,i.jsxs)("div",{className:"border p-2 rounded-lg shadow-md mb-8",children:[(0,i.jsx)("div",{className:"relative w-full h-48 mb-2",children:(0,i.jsx)(ex.default,{src:e.imageUrl,alt:e.fileName||"Galleri Bild",fill:!0,className:"object-cover rounded-md"})}),(0,i.jsx)("div",{className:"flex items-center justify-start gap-2",children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.A,{label:e.fileName,value:n,onChange:e=>d(e.target.value)}),(0,i.jsx)(el,{onClick:()=>{eu(e.id,n),t(!1),d("")}}),(0,i.jsx)(ec,{onClick:()=>{t(!1),d("")}})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-base font-semibold truncate",children:(0,ep.S)(e.fileName)}),(0,i.jsx)(eo,{fontSize:"small",onClick:()=>t(!0)})]})}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 py-2",children:["Uploaded: ",e.uploadedAt.toLocaleDateString()]}),(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{variant:"outlined",color:"error",startIcon:(0,i.jsx)(en,{}),onClick:()=>o(!s),children:"Delete"})}),s&&(0,i.jsxs)("div",{className:"flex items-center justify-start gap-2 mt-2",children:[(0,i.jsx)("p",{children:"Are you sure you want to delete this image?"}),(0,i.jsx)(ed,{className:"text-red-500 cursor-pointer",onClick:()=>{em(e.id),o(!1)}}),(0,i.jsx)(ec,{className:"cursor-pointer",onClick:()=>o(!1)})]})]})};var ef=t(16189);let eg=({children:e})=>{let{user:r,loading:t}=(0,s.A)(),o=(0,ef.useRouter)();return((0,a.useEffect)(()=>{t||r&&!r.isAnonymous||"sign-in"===window.location.pathname||o.push("/sign-in")},[r,t,o]),t)?(0,i.jsx)("p",{children:"Loading..."}):r?(0,i.jsx)(i.Fragment,{children:e}):null},ev=async e=>(await d.j.currentUser?.reload(),!!d.j.currentUser?.emailVerified&&(await (0,et.mZ)((0,et.H9)(d.db,"users",e),{emailVerified:!0}),!0));var eb=t(45579);let ey=e=>{let[r,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e)return void t(null);let r=(0,et.P)((0,et.rJ)(d.db,"followers"),(0,et._M)("followedId","==",e)),i=(0,et.aQ)(r,e=>{t(e.size)});return()=>i()},[e]),{followerCount:r}},ej=o().forwardRef(function(e,r){return(0,i.jsx)(p.A,{direction:"up",ref:r,...e})}),eA=({user:e})=>{let[r,t]=(0,a.useState)(!1),[s,o]=(0,a.useState)(""),[n,c]=(0,a.useState)(null),p=async()=>{if(e?.uid)try{await (0,et.mZ)((0,et.H9)(d.db,"users",e.uid),{username:s}),c(`Username edited to ${s} successfully!`)}catch(e){console.error("Error editing username: ",e),c("Error editing username")}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.A,{variant:"outlined",onClick:()=>t(!0),sx:{width:"100%",color:"#E38724"},children:"Edit Account"}),(0,i.jsxs)(q,{open:r,slots:{transition:ej},keepMounted:!0,onClose:()=>t(!1),"aria-describedby":"alert-dialog-slide-description",children:[(0,i.jsx)(L,{children:"Edit the username of your profile"}),(0,i.jsxs)(B,{children:[(0,i.jsxs)(Y,{id:"alert-dialog-slide-description",children:["A username is a perfect way to uniquify your account.",(0,i.jsx)("br",{}),"Here you can edit your username."]}),(0,i.jsx)(Q.A,{label:"New Username",value:s,onChange:e=>o(e.target.value),sx:{marginTop:"1rem"}})]}),(0,i.jsxs)(er,{children:[(0,i.jsx)(l.A,{variant:"outlined",onClick:()=>t(!1),children:"Don't edit"}),(0,i.jsx)(l.A,{variant:"outlined",onClick:()=>{t(!1),p()},children:"Edit username"})]})]}),n&&(0,i.jsx)("p",{children:n})]})},ew=()=>{let{user:e,loading:r}=(0,s.A)(),{userInfo:t}=(0,c.A)(),[o,p]=(0,a.useState)(""),[,u]=(0,a.useState)(0),{images:m}=(0,eb.K)(e?.uid),{followerCount:x}=ey(e?.uid),h=async()=>{e?.uid?(p(await ev(e?.uid)?"Email verified!":"Still not verified. Please check your email."),u(e=>e+1)):console.log("No user found")},f=async()=>{d.j.currentUser&&(await (0,n.gA)(d.j.currentUser),p("Verification email sent!"))};return r?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col justify-center items-center px-8",children:[(0,i.jsx)("h1",{className:"text-[#1976D2] font-bold text-2xl",children:"Profile"}),(0,i.jsxs)("div",{className:"flex flex-col w-full justify-center items-center sm:max-w-[512px]",children:[(0,i.jsxs)("p",{className:"text-2xl w-full text-left",children:["Welcome to your profile page"," ",t?.username?t.username:t?.email]}),(0,i.jsxs)("p",{className:"text-2xl py-8 w-full text-left",children:["Followers: ",x]}),(0,i.jsx)("p",{className:"text-2xl pb-8",children:"Scroll down to browse all your uploaded images, add custom names, edit and delete."}),!t?.emailVerified&&(0,i.jsxs)("div",{className:"flex flex-col justify-start items-center w-full",children:[(0,i.jsx)("p",{className:"text-2xl w-full text-left",children:"Please verify to complete your account."}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,i.jsx)(l.A,{variant:"outlined",onClick:h,sx:{width:"100%",color:"#E38724"},children:"I have verified my email"}),(0,i.jsx)(l.A,{variant:"outlined",onClick:f,sx:{width:"100%",color:"#E38724"},children:"Please resend verification"}),(0,i.jsx)("p",{className:"text-xl font-bold",children:"Remember to check your spam inbox."})]}),(0,i.jsx)("p",{children:o})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 w-full sm:max-w-[512px]",children:[(0,i.jsx)(eA,{user:e}),(0,i.jsx)(l.A,{variant:"outlined",color:"error",onClick:()=>(0,n.CI)(d.j),sx:{width:"100%"},children:"Log out"})]})]}),!t?.username&&(0,i.jsx)(es,{user:e,userInfo:t})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 w-full max-w-5xl p-8",children:m.map(e=>(0,i.jsx)(eh,{image:e},e.id))})]})},eC=()=>(0,i.jsx)(eg,{children:(0,i.jsx)(ew,{})})},94735:e=>{"use strict";e.exports=require("events")},95984:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var i=t(65239),s=t(48088),a=t(88170),o=t.n(a),l=t(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(r,n);let d={children:["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,75758)),"C:\\programming\\pic-share\\src\\app\\profile\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\programming\\pic-share\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\programming\\pic-share\\src\\app\\profile\\page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},97021:(e,r,t)=>{Promise.resolve().then(t.bind(t,94643))}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[447,808,658,474,845],()=>t(95984));module.exports=i})();